function setupAutocomplete(inp, arr) {
  inp.addEventListener("input", function() {
    const val = this.value.trim();
    closeAllLists();
    if (!val) return;

    const valNorm = normalizarNome(val);

    const list = document.createElement("DIV");
    list.setAttribute("class", "autocomplete-items");
    this.parentNode.appendChild(list);

    arr.forEach(item => {
      if (normalizarNome(item.nome).startsWith(valNorm)) {
        const el = document.createElement("DIV");
        el.innerHTML =
          "<strong>" + item.nome.substr(0, val.length) + "</strong>" +
          item.nome.substr(val.length);

        el.innerHTML += `<input type='hidden' value='${item.nome}'>`;

        el.addEventListener("click", () => {
          inp.value = item.nome;
          document.getElementById("uf").value = item.uf;
          closeAllLists();
        });

        list.appendChild(el);
      }
    });
  });

  function closeAllLists(elmnt) {
    const items = document.getElementsByClassName("autocomplete-items");
    for (let i = 0; i < items.length; i++) {
      items[i].remove();
    }
  }
}
